#c-style-apply
module {..} = import "../../../runtime/malgo/Builtin.mlg"
module {..} = import "../../../runtime/malgo/Prelude.mlg"

infix 4 (==)
def (==) = { (x, y) -> eqInt64(x, y) }

infixl 6 (-)
def (-) = { (x, y) -> subInt64(x, y) }

infixl 7 (*)
def (*) = { (x, y) -> mulInt64(x, y) }

def fact = { (n) -> factAcc({n, 1i64}) }

def factAcc = { ({n, acc}) -> if(n == 0i64, { (_) -> acc }, { (_) -> factAcc({n - 1i64, n * acc}) }) }

def main = { (_) ->
  fact(5i64) |> toStringInt64 |> putStrLn
}